{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 3,
  "summary": "FreeFire Tournament app with UPI payment integration. Deposit page uses UPI intent links to open installed UPI apps (GPay, PhonePe, Paytm) with minimum ₹20 deposit, followed by screenshot upload for payment verification.",
  "architectural_notes": [
    "Deposit flow: UPI deep link format upi://pay?pa=8728872927@fam&pn=FreeFireTournament&am={amount}&cu=INR, minimum deposit ₹20",
    "After UPI payment, user is redirected to screenshot upload screen for manual verification"
  ],
  "known_issues": [
    "'Unauthorized' error occurring on deposit page for logged-in users"
  ],
  "isFixRequest": true,
  "existing_features": [
    {
      "id": "feature-update-the-manualdepositmodal-component-to-replace-the-static-upi-id-display-with-a-upi-intent-link-button-when-the-user-enters-a-valid-amount-minimum-20-and-clicks-proceed-to-pay-construct-the-deep-link-upi-pay-pa-8728872927-fam-pn-freefiretournament-am-amount-cu-inr-and-trigger-it-via-window-location-href-or-an-anchor-tag-with-href-set-to-the-deep-link-so-the-device-automatically-presents-installed-upi-apps-gpay-phonepe-paytm-for-the-user-to-complete-payment",
      "title": "Update the ManualDepositModal component to replace the static UPI ID display with a UPI Intent Link button. When the user enters a valid amount (minimum ₹20) and clicks 'Proceed to Pay', construct the deep link: upi://pay?pa=8728872927@fam&pn=FreeFireTournament&am={amount}&cu=INR and trigger it via window.location.href or an anchor tag with href set to the deep link, so the device automatically presents installed UPI apps (GPay, PhonePe, Paytm) for the user to complete payment.",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-after-the-upi-deep-link-is-triggered-transition-the-deposit-modal-flow-to-a-dedicated-screenshot-upload-screen-this-screen-should-prompt-the-user-to-upload-a-payment-screenshot-for-manual-verification-and-allow-submission-of-the-transaction-details-screenshot-transaction-id-to-the-backend-this-replaces-the-previous-mid-flow-upi-id-copy-step-and-makes-screenshot-upload-the-next-explicit-step-after-payment-initiation",
      "title": "After the UPI deep link is triggered, transition the deposit modal/flow to a dedicated screenshot upload screen. This screen should prompt the user to upload a payment screenshot for manual verification, and allow submission of the transaction details (screenshot + transaction ID) to the backend. This replaces the previous mid-flow UPI ID copy step and makes screenshot upload the next explicit step after payment initiation.",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-unauthorized-error-that-occurs-on-the-deposit-page-for-logged-in-users-audit-the-deposit-related-backend-query-and-mutation-hooks-in-usequeries-ts-to-ensure-they-use-the-authenticated-actor-not-anonymous-ensure-that-when-a-logged-in-user-initiates-a-deposit-the-actor-is-called-with-the-user-s-authenticated-identity-eliminating-the-unauthorized-rejection",
      "title": "Fix the 'Unauthorized' error that occurs on the deposit page for logged-in users. Audit the deposit-related backend query and mutation hooks in useQueries.ts to ensure they use the authenticated actor (not anonymous). Ensure that when a logged-in user initiates a deposit, the actor is called with the user's authenticated identity, eliminating the unauthorized rejection.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "UPI Intent Link on Deposit Page — open UPI apps via deep link upi://pay?pa=8728872927@fam&pn=FreeFireTournament&am={amount}&cu=INR with min ₹20, then redirect to screenshot upload screen",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Fix 'Unauthorized' error on deposit flow for logged-in users",
      "reqIds": [],
      "status": "pending"
    }
  ],
  "gameProjectType": "none",
  "projectName": "FreeFireTournament",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}